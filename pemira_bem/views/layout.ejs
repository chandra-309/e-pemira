<!DOCTYPE html>
<html lang="id">
 <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><%= typeof title !== 'undefined' ? title : 'E-Pemira' %></title>
  <link rel="stylesheet" href="/css/styles.css" />
  <style>
   /* Enhanced header styling for better logo presentation */
   .header-simple { 
     padding: 1.5rem 0; 
     background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
     box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
   }
   .header-simple h1 { 
     font-size: 2.2rem; 
     text-shadow: 0 2px 4px rgba(0,0,0,0.1);
     font-weight: 700;
   }
   .header-with-logos {
     background: rgba(255,255,255,0.1);
     border-radius: 12px;
     margin: 0 1rem;
     backdrop-filter: blur(10px);
   }
   @media (max-width: 768px) {
    .header-simple { padding: 1rem 0; }
    .header-simple h1 { font-size: 1.8rem; }
   }
  </style>
 </head>
 <body>
	<% if (user) { %>
		<aside class="sidebar">
			<div class="sidebar-header">
				<div class="header-logos">
					<img src="/img/logo-left-1.png" alt="Logo 1" class="logo-left logo-1" />
					<img src="/img/logo-left-2.png" alt="Logo 2" class="logo-left logo-2" />
				</div>
				<h2>E-Pemira </h2>
			</div>
			<nav class="sidebar-nav">
				<% if (user.role === 'admin') { %>
					<a href="/admin" class="nav-item">
						<span class="nav-icon">📊</span>
						<span class="nav-text">Dashboard</span>
					</a>
					<a href="/admin/students" class="nav-item">
						<span class="nav-icon">👥</span>
						<span class="nav-text">Data Mahasiswa</span>
					</a>
					<a href="/admin/candidates" class="nav-item">
						<span class="nav-icon">🗳️</span>
						<span class="nav-text">Daftar Kandidat</span>
					</a>
					<a href="/admin/stats" class="nav-item">
						<span class="nav-icon">📈</span>
						<span class="nav-text">Statistik</span>
					</a>
				<% } else { %>
					<a href="/voting" class="nav-item">
						<span class="nav-icon">🗳️</span>
						<span class="nav-text">Voting</span>
					</a>
				<% } %>
			</nav>
			<div class="sidebar-footer">
				<div class="user-info">
					<span class="user-role"><%= user.role === 'admin' ? 'Admin' : 'Mahasiswa' %></span>
				</div>
				<form method="post" action="/logout" class="logout-form">
					<input type="hidden" name="_csrf" value="<%= csrfToken %>">
					<button type="submit" class="btn btn-outline btn-sm">Logout</button>
				</form>
			</div>
		</aside>
	<% } else { %>
		<header class="header-simple">
			<div class="container header-with-logos">
				<div class="header-logos">
					<img src="/img/logo-left-1.png" alt="Logo 1" class="logo-left logo-1" />
					<img src="/img/logo-left-2.png" alt="Logo 2" class="logo-left logo-2" />
				</div>
				<h1>E-Pemira </h1>
			</div>
		</header>
	<% } %>

	<main class="<%= user ? 'main-with-sidebar' : 'main-full' %>">
		<div class="container">
			<% if (flash.error && flash.error.length) { %>
				<div class="card" style="border-color:#fecaca;background:#fef2f2;color:#991b1b;"> <%= flash.error[0] %> </div>
			<% } %>
			<% if (flash.success && flash.success.length) { %>
				<div class="card" style="border-color:#bbf7d0;background:#f0fdf4;color:#166534;"> <%= flash.success[0] %> </div>
			<% } %>
			<%- body %>
		</div>
	</main>

	<footer class="<%= user ? 'footer-with-sidebar' : 'footer-full' %>">
		<div class="container">
			<a href="https://www.instagram.com/dpmakb/?utm_source=ig_web_button_share_sheet" target="_blank" class="footer-link">
				DEWAN PERWAKILAN MAHASISWA AKB
			</a>
		</div>
	</footer>

	<script src="/js/lightbox.js"></script>
</body>
</html>

